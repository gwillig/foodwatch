<!DOCTYPE html>
<html lang="en">
<head>
  <title>Home</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="https://d3js.org/d3.v3.min.js"></script>
  <script type="text/javascript" src="{{ url_for('static', filename = 'home.js') }}?100"></script>
  <style>
html,
body {
  padding:0;
  width:100%;
  height:100%;

}

.chart-container {
  margin-left:5%;
  width:90%;
  height:50%;
  border: 1px dotted silver;
}
  body {
    margin: 0;
    font-family: Arial, Helvetica, sans-serif;
  }

.main {
padding: 16px;
margin-bottom: 30px;
}

svg text{
font-size: 1em;
font-family: sans-serif;


}

.customers td, .customers th {
  border: 1px solid #ddd;
  padding: 8px;
}

.customers tr:nth-child(even){background-color: #f2f2f2;}

.customers tr:hover {background-color: #ddd;}

.customers th {
  padding-top: 12px;
  padding-bottom: 12px;
  text-align: left;
  background-color: #E78302;
  color: white;
}

.td_food_name{
    width:80%
}

.food_amount{
    width:25%
}

.food_time{
  width:10%;
}

.td_timestamp{
  display:none;
}
</style>

</head>
<body  onload="create_pieChart(6)">

<div class="chart-container">

</div>
<div class="customers">

<table id="part_day">
  <tr>
    <th>Time</th>
    <th>Amount</th>
    <th>Yester.</th>
    <th>Median</th>
  </tr>
  <tr>
    <th>Morning</th>
    <td>500</td>
    <td>600</td>
     <td>600</td>
  </tr>
  <tr>
    <th>After.</th>
    <td>500</td>
    <td>600</td>
    <td>600</td>
   </tr>
  <tr>
    <th>Evening</th>
    <td>500</td>
    <td>600</td>
    <td>600</td>
  </tr>
</table>
<table id="today_food">
  <tr>
    <th class="food_time">Time</th>
    <th>Name</th>
    <th onclick="insert_new_row()">Calorie</th>
  </tr>
  <tr>
    <td class="td_timestamp">placeholder_timestampe</td>
    <td class="food_time" >13:15</td>
    <td>
      <input class="td_food_name" list="food_name" />

      <datalist id="food_name">
          <option value="Chocolate">
          <option value="Coconut">
          <option value="Mint">
          <option value="Strawberry">
          <option value="Vanilla">
      </datalist>
    </td>
    <td>
    <input  class="food_amount" list="cal_amout" >
      <datalist id="cal_name">
        <option value=50>
        <option value=100>
        <option value=150>
        <option value=200>
        <option value=250>
        <option value=300>
        <option value=350>
        <option value=400>

    </datalist>
    </td>
  </tr>
  <tr>
    <td class="td_timestamp">pl_timestamp</td>
    <td class="current_time">placeholder</td>
    <td>
      <input class="td_food_name" list="placeholder_name" />

      <datalist id="placeholder_name">
          <option value="Chocolate">
          <option value="Coconut">
          <option value="Mint">
          <option value="Strawberry">
          <option value="Vanilla">
      </datalist>
    </td>
    <td>
    <input  class="food_amount" list="placeholder_amount" >
      <datalist id="placeholder_amount">
        <option value=50>
        <option value=100>
        <option value=150>
        <option value=200>
        <option value=250>
        <option value=300>
        <option value=350>
        <option value=400>

    </datalist>
    </td>
</table>
</div>


{% include "footer.html" %}
<script id="d3">

function current_time_string(){
  let currentdate = new Date();
  let datetime =   currentdate.getHours() + ":"
                  + currentdate.getMinutes()+ ":"
                + currentdate.getSeconds();

  return datetime

}


function replaceAll(str, find, replace) {
  //inspired by https://stackoverflow.com/questions/1144783/how-can-i-replace-all-occurrences-of-a-string
  return str.replace(new RegExp(find, 'g'), replace);
}


function insert_new_row(){
  table_today =document.querySelector("#today_food")
  row = table_today.insertRow(1);
  var lastRow = table_today.rows.length-1;
  row.innerHTML = replaceAll(table_today.rows[lastRow].innerHTML,"placeholder", current_time_string())
  row.innerHTML = row.innerHTML.replace("pl_timestamp", Date.now())

}
</script>
</body>
</html>


